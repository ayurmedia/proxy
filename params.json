{"note":"Don't delete this file! It's used internally to help with page regeneration.","name":"Proxy","body":"# Proxy server in node.js\r\nThis proxy server runs on port 8080 and can be used as a real proxy-server. \r\nI use this in OSX 10.8.2. Set networksettings > advanced > http-proxy to \"localhost:8080\". \r\nand start the server from commandline with. \r\n\"$ node proxy.js\"\r\nTurn off http-proxy if you dont use it anymore.\r\nPOST-Request from Browser seem to work, but are not much tested. 90% of usage is GET-Requests anyways. \r\nthere are some domains and extensions filtered, as they are not working 100% with this proxy. \r\nthe basic idea is only to intercept \"content-type: text/html\" but actually some webservers are badly configured and even send images with text/html. so there is an additional extensionfilter. \r\nthe proxyserver does not work with https, so only turn on network-proxy for http(80) and not https(443). \r\n\r\nthe script reorders javascript in html-code and moves it from top to bottom, so that the page loads faster. \r\none drawback is, that now the html-code is buffered, as all html needs to be loaded by the proxy first to restructure the html. it could be done in the request.on('data') but its quite complicated as html-code is spread over different chunks.\r\n\r\nif there is document.write inside the html-flow. and does not append to body at the end, then these blocks will be shown at the end of the document. but its bad practice anyways. so i don't care if these pages break. the pregmatch could be optimized to ignore script tags with document.write, and not rearrange them. \r\n\r\nthe proxy.js is developed and tested with current latest node.js v0.84. ","google":"","tagline":"node.js proxy server, with script to bottom optimization"}